# Infer-OS Ã— AMD GAIA çµ±åˆ å®Ÿè£…ä»•æ§˜æ›¸ v1.0

## ğŸ“‹ **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±**

- **æ–‡æ›¸å**: Infer-OS Ã— AMD GAIA çµ±åˆ å®Ÿè£…ä»•æ§˜æ›¸ v1.0
- **å¯¾è±¡**: Windows 11 + GAIAï¼ˆRAUX/CLI â†’ Lemonade Server â†’ ORT GenAI â†’ NPU/iGPUï¼‰
- **æƒ³å®šèª­è€…**: ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢å®Ÿè£…æ‹…å½“ã€MLOpsã€SRE
- **éç›®æ¨™**: NPU ãƒ‰ãƒ©ã‚¤ãƒå®Ÿè£…ã‚„ ORT ã‚³ã‚¢æ”¹å¤‰ï¼ˆå¿…è¦ãªã‚‰ãƒ•ã‚§ãƒ¼ã‚º3ã§æ¤œè¨ï¼‰

## ğŸ¯ **ç›®çš„ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—**

### **ç›®çš„**
Infer-OSã®åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—ãƒ»KVæ®µéšçš„é‡å­åŒ–ãƒ»IOBindingæœ€é©åŒ–ã‚’ã€GAIAã‚¹ã‚¿ãƒƒã‚¯ã¸ç„¡åœæ­¢ã§çµ±åˆã—ã€ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆå‘ä¸Šãƒ»ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·çŸ­ç¸®ãƒ»ãƒ¡ãƒ¢ãƒªå‰Šæ¸›ã‚’å®Ÿç¾ã€‚

### **ã‚¹ã‚³ãƒ¼ãƒ—**
- Lemonade Serverï¼ˆæ¨è«–ã‚µãƒ¼ãƒï¼‰ã¨ORT GenAIå®Ÿè¡Œç³»ã¸ã®åˆ¶å¾¡ãƒ—ãƒ¬ãƒ¼ãƒ³æ³¨å…¥
- KV-cacheã®**å¯é€†æ®µéšçš„é‡å­åŒ–ï¼ˆFP16/INT8/INT4/é€€é¿ï¼‰**ã®çµ„ã¿è¾¼ã¿
- iGPUï¼ˆDMLï¼‰å„ªå…ˆã®IOBindingã¨ãƒ¡ãƒ¢ãƒªå†åˆ©ç”¨
- Hybridï¼ˆNPU+iGPUï¼‰ã®é‹ç”¨æœ€é©åŒ–ï¼ˆPrefillâ†’iGPUã€Decodeâ†’NPU ã‚’åŸºæœ¬ã€å‹•çš„åˆ‡æ›¿ï¼‰

## ğŸ”§ **å‰æãƒ»ä¾å­˜é–¢ä¿‚**

### **ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶**
- **OS**: Windows 11ï¼ˆGAIA è¦ä»¶ï¼‰
- **ãƒãƒ¼ãƒ‰**: Ryzen AIï¼ˆXDNA NPUï¼‰+ Radeon iGPUï¼ˆRDNAã€DML çµŒç”±ï¼‰

### **å®Ÿè¡ŒåŸºç›¤**
- **GAIA**: RAUX/gaia-cli â†’ Lemonade Server â†’ ONNX Runtime GenAIï¼ˆEP: Hybrid / DML / CPUï¼‰
- **è¨€èª**: .NET / Pythonï¼ˆLemonade ã®å®Ÿè£…è¨€èªã«ä¾å­˜ã€æ¨™æº–ã¯ Python/TypeScript æ··åœ¨ï¼‰

### **é–‹ç™ºç’°å¢ƒ**
- **è¨€èª/ãƒ“ãƒ«ãƒ‰**: C++17/20ã€Rust 1.7xã€Python 3.11ã€CMakeã€MSVCã€Wheel/nugetï¼ˆæœ€å°ï¼‰
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š**: GAIA æ¨å¥¨ã® NPU/iGPU ãƒ‰ãƒ©ã‚¤ãƒ & ORT GenAI ã¨åŒä¸€

## ğŸ—ï¸ **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦**

### **æ§‹æˆï¼ˆãƒ¬ã‚¤ãƒ¤ï¼‰**
```
RAUX / gaia-cli
   â†“
Lemonade Serverï¼ˆæ¨è«–APIï¼‰
   â†“        â†‘
Infer-OS Control Agentï¼ˆWindowsã‚µãƒ¼ãƒ“ã‚¹ï¼ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ï¼‰
   â†“        â†‘
ONNX Runtime GenAI ï¼ˆEP: Hybrid / DML / CPUï¼‰
   â†“
NPUï¼ˆDecodeå‘ã‘ï¼‰ / Radeon iGPUï¼ˆPrefill/Attentionå‘ã‘ï¼‰
```

### **ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
- **Infer-OS Control Agent**: 1ms/10ms/100ms åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—ã€KV é‡å­åŒ–ãƒãƒªã‚·ã€IOBinding ç®¡ç†ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªé›†ç´„ã‚’æ‹…å½“
- **Lemonade Adapter**: Lemonade ã‹ã‚‰å‰å¾Œå‡¦ç†ï¼ˆPreRun/PostRunï¼‰ãƒ•ãƒƒã‚¯ã€KV èª­ã¿æ›¸ããƒ•ãƒƒã‚¯ã€è¨­å®šåæ˜ ã‚’è¡Œã†è»½é‡ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- **ORT Adapter**: SessionOptions/RunOptions/IOBindingã€QDQï¼ˆQuantize/Dequantizeï¼‰ã‚«ã‚¹ã‚¿ãƒ OPã®æ³¨å…¥ï¼ˆãƒ•ã‚§ãƒ¼ã‚º2ï¼‰

### **ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å°å…¥**

#### **Phase 1: ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ï¼ˆæœ€çŸ­å°å…¥ï¼‰**
- Lemonade å´ã¯æœ€å°æ”¹å¤‰
- HTTP/CLI/ç’°å¢ƒå¤‰æ•°ã§ ORT/å®Ÿè¡Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‹•çš„å¤‰æ›´
- KV ã¯å¤–éƒ¨ãƒ©ãƒƒãƒ‘ã§ç®¡ç†

#### **Phase 2: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é€£æº**
- Lemonade ã« KV-Manager ã¨ Pre/PostRun Hooks ã‚’å®Ÿè£…
- QDQ ã‚«ã‚¹ã‚¿ãƒ OP ã‚’ ORT ã‚°ãƒ©ãƒ•ã«æŒ¿å…¥

#### **Phase 3: ãƒãƒ¼ãƒ‰é€£æº**
- Prefill/Attentionâ†’iGPUã€Decodeâ†’NPU ã®åˆ‡æ›¿ã‚’åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—ã§å‹•çš„æœ€é©åŒ–
- KV ã®äºŒå±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆVRAM å¸¸é§ï¼‹å¿…è¦æ™‚ NPU è»¢é€ï¼‰

## ğŸ”§ **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜**

### **4.1 Infer-OS Control Agentï¼ˆWindows ã‚µãƒ¼ãƒ“ã‚¹ï¼‰**

#### **å½¹å‰²**
åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—ã€æ–¹ç­–æ±ºå®šã€KV ãƒãƒªã‚·ç®¡ç†ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€è¨­å®šAPI

#### **å®Ÿè£…**
Rust or C++ å¸¸é§ã‚µãƒ¼ãƒ“ã‚¹ + å†…è”µ HTTPï¼ˆ127.0.0.1ï¼‰

#### **å…¬é–‹ APIï¼ˆREST/JSONï¼‰**
- `POST /v1/policy`: æœ€é©åŒ–æ–¹ç­–ã‚’é©ç”¨ï¼ˆä¾‹ï¼škv.modeã€kv.windowã€å®‰å…¨é–¾å€¤ã€io.bindã€scheduler.modeï¼‰
- `POST /v1/run-context`: æ¬¡ã‚¸ãƒ§ãƒ–ã®æƒ³å®šæ¡ä»¶ï¼ˆLã€batchã€æ¸©åº¦/ä¸Šé™ã€å“è³ªç›®æ¨™ï¼‰ã‚’é€šçŸ¥
- `GET /v1/metrics`: tokens/sã€FTLã€p95ã€VRAM/Host ä½¿ç”¨é‡ã€Î”PPL æ¨å®šã€NPU/iGPU åˆ©ç”¨ç‡
- `GET /v1/health`: ç¨¼åƒç¢ºèª

#### **åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—**
- **Fastï¼ˆ1msï¼‰**: è² è·æ€¥å¤‰ãƒ»ç†±ãƒ»å¸¯åŸŸè¦³æ¸¬ã€Token Halting/KV ç›´è¿‘çª“ã®ç·Šæ€¥ä¿è­·
- **Midï¼ˆ10msï¼‰**: IOBinding/ãƒãƒƒãƒ•ã‚¡å†åˆ©ç”¨ã€KV é‡å­åŒ–ãƒ¬ãƒ™ãƒ«ã®å¾®èª¿æ•´
- **Slowï¼ˆ100msï¼‰**: Prefill/Decode ãƒ‡ãƒã‚¤ã‚¹é…åˆ†ã€é‡å­åŒ–ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ‡æ›¿ã€é–¾å€¤å†å­¦ç¿’

#### **ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•**
ã‚¨ãƒ©ãƒ¼æ™‚ã¯ **Baselineï¼ˆæœ€é©åŒ–OFFï¼‰** ã¸è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

### **4.2 Lemonade Adapterï¼ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ or ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼‰**

#### **Hook ãƒã‚¤ãƒ³ãƒˆ**
- **PreRun**: ãƒ¢ãƒ‡ãƒ«/å…¥åŠ›æ¡ä»¶/è¦æ±‚SLOã‚’ Infer-OS ã«é€šçŸ¥ã€è¿”å´ã•ã‚ŒãŸæ–¹ç­–ã‚’ ORT ã«åæ˜ 
- **KVWrite / KVRead**: KV æ›¸è¾¼/èª­è¾¼æ™‚ã« æ®µéšçš„é‡å­åŒ–/å¾©å…ƒã‚’é©ç”¨ï¼ˆPhase2ï¼‰
- **PostRun**: å®Ÿç¸¾ãƒ¡ãƒˆãƒªã‚¯ã‚¹é€ä¿¡ï¼ˆInfer-OS ã«å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ¸¡ã™ï¼‰

#### **è¨­å®šåæ˜ **
- ORT SessionOptions/RunOptionsï¼ˆã‚¹ãƒ¬ãƒƒãƒ‰ã€Graph Optimization Levelã€Arenaã€ä¸¦åˆ—åº¦ï¼‰
- IOBindingï¼ˆå…¥åŠ›ãƒ»å‡ºåŠ›ãƒãƒƒãƒ•ã‚¡ã€KV ãƒãƒƒãƒ•ã‚¡ã®å†åˆ©ç”¨ï¼‰
- Hybrid EP ã®ä½¿ç”¨æ–¹é‡ï¼ˆPrefillâ†’DMLã€Decodeâ†’NPUï¼‰

### **4.3 ORT Adapter**

#### **IOBinding**
DML ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«äº‹å‰ç¢ºä¿ã—ãŸãƒãƒƒãƒ•ã‚¡ãƒ—ãƒ¼ãƒ«ã‚’ä½œã‚Šå›ã™

#### **QDQ ã‚«ã‚¹ã‚¿ãƒ OPï¼ˆPhase2ï¼‰**
- KVQuantize(op=Q_kv)ã€KVDequantize(op=DQ_kv) ã‚’ KV ã®å¢ƒç•Œã«æŒ¿å…¥
- ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ç²¾åº¦ãƒ¬ãƒ™ãƒ«åˆ‡æ›¿ï¼ˆFP16/INT8/INT4ï¼‰

**æ³¨æ„**: NPU ç›´ä¸‹ã§ã® IOBinding / ã‚«ã‚¹ã‚¿ãƒ  OP ã¯åˆ¶ç´„ãŒã‚ã‚‹å¯èƒ½æ€§ â†’ iGPU å´å„ªå…ˆã§å®Ÿè£…ã—ã€NPU ã¯ Decode åé‡æ´»ç”¨

## ğŸ§® **ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ä»•æ§˜**

### **5.1 KV æ®µéšçš„é‡å­åŒ–ï¼ˆå¯é€†ï¼‰**

#### **ãƒ¬ãƒ™ãƒ«**
- **L0**: FP16ï¼ˆæœ€æ–°ãƒ»é‡è¦ï¼‰
- **L1**: INT8
- **L2**: INT4
- **L3**: é€€é¿ï¼ˆåœ§ç¸®/Dropï¼‰

#### **é‡è¦åº¦ã‚¹ã‚³ã‚¢**
```
I = Î±Â·AttnWeight + Î²Â·AccessFreq + Î³Â·SemanticRel â€“ Î·Â·Age
```

#### **æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ“¬ä¼¼ã‚³ãƒ¼ãƒ‰ï¼‰**
```python
def decide_level(entry, mem_pressure, quality_budget, temp, bw):
    I = attn(entry)*Î± + freq(entry)*Î² + sem(entry)*Î³ - age(entry)*Î·
    if entry.is_recent(W=64): return L0  # è¿‘å‚å®‰å…¨çª“ã¯å¸¸ã«FP16
    if mem_pressure > 0.8 and I < 0.3:  return L3
    if mem_pressure > 0.6 and I < 0.5:  return L2
    if I < 0.7 or quality_budget < 0:   return L1
    return L0
```

#### **å¯é€†æ€§**
L1/L2 ã¯å¾©å…ƒãƒ¡ã‚¿ï¼ˆscale/zero-point/shape/chunk idï¼‰ã‚’ä»˜ä¸ã€‚å“è³ªåŠ£åŒ–æ¤œçŸ¥æ™‚ã¯ L0 ã¸æ˜‡æ ¼ã€‚

### **5.2 IOBinding ï¼† ãƒãƒƒãƒ•ã‚¡å†åˆ©ç”¨**
- äº‹å‰ã« iGPU(DML) å´ã§ KV/å…¥å‡ºåŠ›ç”¨ã®å›ºå®šã‚µã‚¤ã‚ºãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ã‚’ç¢ºä¿
- å®Ÿè¡Œæ¯ã« OrtIoBinding.BindInput/BindOutput ã‚’ä½¿ã„ ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼ã§å›ã™
- è¶³ã‚Šãªã„å ´åˆã®ã¿æ‹¡å¼µï¼ˆæ–­ç‰‡åŒ–ã‚’é¿ã‘ã‚‹ï¼‰

### **5.3 Hybrid ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ï¼ˆPrefill/Decodeï¼‰**

#### **æ–¹é‡**
Prefill/Attention ã¯ iGPUï¼ˆDMLï¼‰ã€Decode ã¯ NPU

#### **åˆ‡æ›¿æ¡ä»¶ï¼ˆSlow ãƒ«ãƒ¼ãƒ—ï¼‰**
- temp>é–¾å€¤ or NPU queue æ·±ã„ â†’ Decode ã‚’ä¸€æ™‚ iGPU ã¸
- é€†ã« iGPU ã‚µãƒ¼ãƒãƒ«é«˜é¨°æ™‚ã¯ NPU ã¸å›å¸°

#### **ç›®çš„é–¢æ•°**
```
min{ p95 / TPS â€“ Î»Â·QualityReserve + Î¼Â·J/token }
```

## âš™ï¸ **è¨­å®šï¼ˆYAMLï¼‰**

```yaml
infer_os:
  quality:
    max_delta_ppl: 0.5
    min_accept_rate: 0.5        # speculation ã‚’ä½¿ã†å ´åˆ
  kv:
    recent_window: 64           # å¸¸ã«FP16ã§ä¿æŒ
    level_thresholds:           # Î±Î²Î³Î· ã¯ãƒ¢ãƒ‡ãƒ«ã”ã¨ã«ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
      L1_int8: 0.7
      L2_int4: 0.5
      L3_evict: 0.3
  io:
    enable_iobinding: true
    dml_pool_bytes: 2048MiB
    host_pool_bytes: 4096MiB
  scheduler:
    mode: hybrid                # hybrid|gpu_only|npu_only
    prefill_device: dml
    decode_device: npu
  loops:
    fast_ms: 1
    mid_ms: 10
    slow_ms: 100
  telemetry:
    push_interval_ms: 1000
```

## ğŸŒ **å¤–éƒ¨ APIï¼ˆInfer-OS Control Agentï¼‰**

### **POST /v1/policy**
- **å…¥åŠ›**: `{ "kv":{ "mode":"dynamic", "recent_window":64 }, "io":{"enable_iobinding":true}, "scheduler":{"mode":"hybrid"} }`
- **å‡ºåŠ›**: `204 No Content`

### **POST /v1/run-context**
- **å…¥åŠ›**: `{ "seq_len":1024, "batch":4, "target_ftl_ms":300, "quality_budget":0.5 }`

### **GET /v1/metrics**
- **å‡ºåŠ›ä¾‹**:
```json
{
  "tps": 28.7, "ftl_ms": 210, "p95_ms": 320,
  "mem": { "vram_gb": 2.8, "host_gb": 6.3, "kv_levels": {"L0":22,"L1":58,"L2":17,"L3":3} },
  "util": { "npu": 0.41, "igpu": 0.63, "cpu": 0.22 },
  "quality": { "delta_ppl_est": 0.18, "spec_accept": 0.62 }
}
```

### **GET /v1/health**
- **å‡ºåŠ›**: `{status:"ok"}`

## ğŸ“Š **ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆKV ãƒ¡ã‚¿ï¼‰**

```cpp
struct KvChunk {
  TensorId id;            // å±¤ãƒ»ãƒ˜ãƒƒãƒ‰ãƒ»æ™‚åˆ»ç¯„å›²
  Level level;            // L0/L1/L2/L3
  Shape shape;            // [H, T, D]
  ScaleZeroMeta qmeta;    // L1/L2 ã®ã¿
  uint64 last_access_ts;  // ns
  float  importance;      // I
  bool   pinned;          // recent_window å†…ã¯ true
}
```

## ğŸ¯ **æ€§èƒ½ç›®æ¨™ï¼ˆSLOï¼‰**

### **7B/8B**
- **TPS**: 1.3â€“1.6Ã— å‘ä¸Š
- **ãƒ¡ãƒ¢ãƒª**: âˆ’60â€“75% å‰Šæ¸›
- **FTL**: âˆ’20â€“30% çŸ­ç¸®

### **20B**
- **TPS**: â‰¥1.8Ã— å‘ä¸Šï¼ˆHybrid å‰æï¼‰
- **ãƒ¡ãƒ¢ãƒª**: âˆ’70â€“80% å‰Šæ¸›

### **å®‰å®šæ€§**
24h é€£ç¶šã§ãƒªãƒ¼ã‚¯ãªã—ã€æ¸©åº¦é€¸è„±æ™‚ã®è‡ªå‹•æ¸›é€Ÿ

## ğŸ“ˆ **ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ»ãƒ­ã‚®ãƒ³ã‚°**

### **ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†**
1s é–“éš”ã§ JSON Linesï¼ˆlogs/metrics_*.jsonlï¼‰ã¸æ›¸å‡ºã—

### **ä¾‹**
```
t, model, seq_len, batch, tps, ftl, p95, vram, host_mem, npu_util, igpu_util, kv_L0/L1/L2/L3, delta_ppl_est
```

### **é‡å¤§ã‚¤ãƒ™ãƒ³ãƒˆ**
ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒã€é‡å­åŒ–ãƒ¬ãƒ™ãƒ«å¤§è¦æ¨¡å¤‰åŒ–ã€EP åˆ‡æ›¿

## ğŸ§ª **ãƒ†ã‚¹ãƒˆè¨ˆç”»**

### **å˜ä½“**
KV Q/DQ ã® MSEã€æœ€å¤§èª¤å·®ã€å¯é€†æ€§ã€recent_window ä¿è­·

### **çµåˆ**
Lemonade Adapter çµŒç”±ã§ ORT IOBinding ãŒåŠ¹ã„ã¦ã„ã‚‹ã‹ï¼ˆã‚³ãƒ”ãƒ¼å›æ•°ã€å¸¯åŸŸï¼‰

### **è² è·**
L={128,512,1024,2048}, batch={1,4,8}ã€é€£ç¶š 6hãƒ»24h

### **A/B**
Infer-OS ON/OFFã€safe/balanced/aggressive ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«

### **å›å¸°**
ãƒ‰ãƒ©ã‚¤ãƒæ›´æ–°/ãƒ¢ãƒ‡ãƒ«æ›´æ–°ã§æ€§èƒ½åŠ£åŒ–ãŒ Â±5% å†…

### **åˆæ ¼åŸºæº–ï¼ˆä¾‹ï¼‰**
- KV é‡å­åŒ–æ™‚ã® Î”PPL æ¨å®š â‰¤ 0.5ï¼ˆè©•ä¾¡ã‚»ãƒƒãƒˆã§æ¤œè¨¼ï¼‰
- 7B/20B ã® SLO ã‚’ 3/4 æ¡ä»¶ã§æº€ãŸã™
- ç•°å¸¸æ™‚ã® Baseline ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒ 1 ç§’ä»¥å†…

## ğŸš€ **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨**

### **é…å¸ƒç‰©**
- `inferos-agent.exe`ï¼ˆWindows ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
- `lemonade-inferos-adapter`ï¼ˆpip/nuget moduleï¼‰
- `ort-kv-qop.dll`ï¼ˆã‚«ã‚¹ã‚¿ãƒ OPï¼›Phase2 ä»¥é™ï¼‰

### **å°å…¥æ‰‹é †**
1. ãƒ‰ãƒ©ã‚¤ãƒ/GAIA/ORT ã‚’æ¨å¥¨ç‰ˆã¸å›ºå®š
2. `inferos-agent.exe install`ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ç™»éŒ²ï¼‰
3. Lemonade ã®è¨­å®šã§ Adapter ã‚’æœ‰åŠ¹åŒ–ï¼ˆenv/è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
4. RAUX/CLI çµŒç”±ã§ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¡å– â†’ ON ã«åˆ‡æ›¿

### **ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯**
Lemonade ã®ãƒ•ãƒ©ã‚°ã§ Adapter ç„¡åŠ¹åŒ–ã€ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢

## ğŸ”’ **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æ¨©é™**

### **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**
- Agent ã¯ localhost ã®ã¿ã§å¾…å—ã€TLS ã¯ä»»æ„ï¼ˆç¤¾å†…é–‰åŸŸæ¨å¥¨ï¼‰
- æœ€å°æ¨©é™ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã—ã€ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™é™å®šï¼‰
- åé›†ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«ãƒ¦ãƒ¼ã‚¶ç”Ÿæˆãƒ†ã‚­ã‚¹ãƒˆã‚’ä¿å­˜ã—ãªã„ï¼ˆãƒãƒƒã‚·ãƒ¥/è¦ç´„ï¼‰

## âš ï¸ **æ—¢çŸ¥ã®ãƒªã‚¹ã‚¯ã¨å¯¾ç­–**

### **NPU EP åˆ¶ç´„**
IOBinding/ã‚«ã‚¹ã‚¿ãƒ OPä¸å¯ãªå ´åˆ â†’ iGPU å´ã§æœ€å¤§åŠ¹æœã‚’å‡ºã™ã€NPU ã¯ Decode åé‡

### **æ›´æ–°è¿½å¾“**
GAIA/ORT æ›´æ–°ã§ API å¤‰æ›´ â†’ ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ï¼ˆPhase1ï¼‰ã‚’ç¶­æŒã—ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ”ãƒ³

### **æ¸©åº¦ãƒ»é›»åŠ›**
é€£ç¶šé«˜è² è·ã§ã‚¯ãƒ­ãƒƒã‚¯ä½ä¸‹ â†’ Slow ãƒ«ãƒ¼ãƒ—ã§ç›®æ¨™ TPS ã‚’å†èª¿æ•´

## ğŸ“… **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆç›®å®‰ï¼‰**

- **W1â€“2**: Phase1 å®Ÿè£…ï¼ˆAgentãƒ»Adapter æœ€å°ã€IOBindingã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼‰
- **W3â€“4**: A/Bãƒ»é•·æ™‚é–“è©¦é¨“ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«èª¿æ•´ï¼ˆsafe/balanced/aggressiveï¼‰
- **W5â€“7**: Phase2ï¼ˆKV ãƒ•ãƒƒã‚¯ã€QDQ ã‚«ã‚¹ã‚¿ãƒ OPã€ã‚³ãƒ”ãƒ¼å‰Šæ¸›ï¼‰
- **W8+**: Phase3ï¼ˆHybrid å‹•çš„åˆ‡æ›¿ã®é«˜åº¦åŒ–ã€NPU å¸¸é§æœ€é©åŒ–ï¼‰

## ğŸ“‹ **å—ã‘å…¥ã‚ŒåŸºæº–ï¼ˆDefinition of Doneï¼‰**

### **Phase1**
- 7B/8B ãƒ¢ãƒ‡ãƒ«ã«ã¦ TPS â‰¥ 1.3Ã—ã€ãƒ¡ãƒ¢ãƒª âˆ’60%ã€FTL âˆ’20% ã‚’å†ç¾
- 24h é€£ç¶šè©¦é¨“ã§ã‚¨ãƒ©ãƒ¼ç‡ < 0.1%ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãªã—
- OFFâ†’ON ã®åˆ‡æ›¿ãŒç„¡åœæ­¢ï¼ˆAPI ã§å³æ™‚åæ˜ ï¼‰
- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆAdapter ç„¡åŠ¹åŒ–ï¼‰ã§å…ƒã® GAIA æŒ™å‹•ã«æˆ»ã‚‹

ã“ã®ä»•æ§˜ã§ç€æ‰‹ã™ã‚Œã°ã€ã¾ãšã¯ã‚µã‚¤ãƒ‰ã‚«ãƒ¼å°å…¥ã§åŠ¹æœã‚’è¦‹ã›ã€æ¬¡ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚³ãƒ”ãƒ¼å‰Šæ¸›ãƒ»ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·çŸ­ç¸®ã‚’è©°ã‚ã‚‹æµã‚Œã«ä¹—ã‚Œã¾ã™ã€‚

